<!DOCTYPE html>
<html th:replace="layouts/main::main(~{::div}, ~{::script}, ~{::link})" xmlns="http://www.w3.org/1999/html">

<link th:href="@{/plugins/datatables/dataTables.bootstrap4.min.css}" rel="stylesheet" type="text/css"/>
<link th:href="@{/plugins/datatables/buttons.bootstrap4.min.css}" rel="stylesheet" type="text/css"/>
<link th:href="@{/plugins/datatables/responsive.bootstrap4.min.css}" rel="stylesheet" type="text/css"/>

<div class="content">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="card table-responsive">
                    <div class="card-header" th:text="#{parking.parkings}"></div>
                    <div class="card-body">

                      <table id="datatable-buttons" class="table table-bordered">
                        <thead>
                        <tr>
                          <th><a th:text="#{ordinal.number}"></a></th>
                          <th><a th:text="#{parking.name}"></a></th>
                          <th><a th:text="#{parking.description}"></a></th>
                          <th><a th:text="#{parking.type}"></a></th>
                          <th><a th:text="#{parking.parkingSpaceNumber}"></a></th>
                          <th><a th:text="#{parking.gateSize}"></a></th>
                          <th></th>
                          <th></th>
                          <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="parking, iterStat : ${parkings}">
                          <td th:text="${iterStat.count}"></td>
                          <td th:text="${parking.name}"></td>
                          <td th:text="${parking.description}"></td>
                          <td th:text="#{'parking.parkingType.' + ${parking.parkingType}}"></td>
                          <td th:text="${parking.parkingSpaceNumber}"></td>
                          <td th:text="${parking.gateList.size()}"></td>
                          <td>
                            <a th:href="@{|/parking/details/${parking.id}|}" th:text="#{parking.settings}"></a>
                          </td>
                          <p sec:authorize="hasAnyRole('ROLE_MANAGER', 'ROLE_ADMIN')">
                          <td><a th:href="@{|/parking/edit/${parking.id}|}" th:text="#{crm.edit}"></a></td>
                          </p>
                          <p sec:authorize="hasRole( 'ROLE_ADMIN')">
                            <td><a th:href="@{|/parking/delete/${parking.id}|}" th:text="#{crm.delete}"></a></td>
                          </p>
                        </tr>
                        </tbody>
                      </table>
                    </div>
                    <p sec:authorize="hasRole('ROLE_ADMIN')">
                    <div class="form-group row">
                      <div class="col-12">
                        <a th:href="@{|/parking/add|}" class="btn btn-success waves-effect waves-light" th:text="#{crm.add}"></a>
                      </div>
                    </div>
                    </p>
                  </div>
                </div>
              </div>
            </div>
</div>

<!-- Required datatable js -->
<script th:src="@{/plugins/datatables/jquery.dataTables.min.js}"></script>
<script th:src="@{/plugins/datatables/dataTables.bootstrap4.min.js}"></script>
<!-- Buttons examples -->
<script th:src="@{/plugins/datatables/dataTables.buttons.min.js}"></script>
<script th:src="@{/plugins/datatables/buttons.bootstrap4.min.js}"></script>
<script th:src="@{/plugins/datatables/jszip.min.js}"></script>
<script th:src="@{/plugins/datatables/pdfmake.min.js}"></script>
<script th:src="@{/plugins/datatables/vfs_fonts.js}"></script>
<script th:src="@{/plugins/datatables/buttons.html5.min.js}"></script>
<script th:src="@{/plugins/datatables/buttons.print.min.js}"></script>
<script th:src="@{/plugins/datatables/buttons.colVis.min.js}"></script>
<!-- Responsive examples -->
<script th:src="@{/plugins/datatables/dataTables.responsive.min.js}"></script>
<script th:src="@{/plugins/datatables/responsive.bootstrap4.min.js}"></script>

<script th:inline="javascript">
    var address = '/plugins/datatables/json/ru.json';
    var locale = [[${#locale}]];
    if (locale == "en") {
        address = "";
    }
  //Buttons examples
  var table = $('#datatable-buttons').DataTable({
    lengthChange: false,
    buttons: ['copy', 'excel', 'pdf', 'csv'],
    language: {
      url: address
    }
  });

  table.buttons().container()
          .appendTo('#datatable-buttons_wrapper .col-md-6:eq(0)');

</script>

</html>