<!DOCTYPE html>
<html th:replace="layouts/main::main(~{::div}, ~{::script}, ~{::link})" xmlns="http://www.w3.org/1999/html">

<link th:href="@{/plugins/datatables/dataTables.bootstrap4.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{/plugins/datatables/buttons.bootstrap4.min.css}" rel="stylesheet" type="text/css" />
<link th:href="@{/plugins/datatables/responsive.bootstrap4.min.css}" rel="stylesheet" type="text/css" />

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header"><b th:text="#{rate.rateConfiguration}"></b></div>
                    <div class="card-body">
                        <input id="parkingId" type="hidden" th:field="*{parkingRate.parking.id}" th:value="*{parkingRate.parking.id}">
                        <form th:action="@{|/rate/add/parking/${parkingRate.parking.id}|}" th:object="${parkingRate}" method="post">
                            <input type="hidden" th:field="*{id}" th:value="*{id}">

                            <div class="row" th:if="${#fields.hasAnyErrors()}">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label" th:text="#{crm.errors}"></label>
                                        <label class="control-label">
                                            <ul>
                                                <li th:each="err : ${#fields.allErrors()}" th:text="${err}" />
                                            </ul>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label" th:text="#{rate.name}"></label>
                                        <input type="text" class="form-control" th:field="*{name}" th:value="*{name}" id="name">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" >
                                        <label class="control-label" th:text="#{rate.type}"></label>
                                        <select id="types" th:field="*{rateType}" th:value="*{rateType}" class="form-control" onchange="checkSelectedTypes(value)">
                                            <option th:value="STANDARD" th:text="#{'rate.Type.STANDARD'}"></option>
                                            <option th:value="PROGRESSIVE" th:text="#{'rate.Type.PROGRESSIVE'}"></option>
                                            <option th:value="INTERVAL" th:text="#{'rate.Type.INTERVAL'}"></option>
                                            <option th:value="DIMENSIONS" th:text="#{'rate.Type.DIMENSIONS'}"></option>
                                            <option th:value="PREPAID" th:text="#{'rate.Type.PREPAID'}"></option>
                                            <option th:value="FREE" th:text="#{'rate.Type.FREE'}"></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div id="freeMinutes" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="beforeFreeMinutes" class="control-label" th:text="#{rate.beforeFreeMinutes}"></label>
                                        <input type="number" class="form-control" th:field="*{beforeFreeMinutes}" th:value="*{beforeFreeMinutes}" id="beforeFreeMinutes" placeholder="15">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="afterFreeMinutes" class="control-label" th:text="#{rate.afterFreeMinutes}"></label>
                                        <input type="number" class="form-control" th:field="*{afterFreeMinutes}" th:value="*{afterFreeMinutes}" id="afterFreeMinutes" placeholder="15">
                                    </div>
                                </div>
                            </div>
                            <div id="dayPayment" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="dayPaymentValue" class="control-label" th:text="#{rate.dayPaymentValue}"></label>
                                        <input type="number" class="form-control" th:field="*{dayPaymentValue}" th:value="*{dayPaymentValue}" id="dayPaymentValue">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label" th:text="#{rate.moreThanTwentyFourHoursCalculateInDays}"></label><br/>
                                        <input type="checkbox" id="moreHoursCalcInDays" th:field="*{moreHoursCalcInDays}">
                                    </div>
                                </div>
                            </div>
                            <div id="prepaid" class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="prepaidValue" class="control-label" th:text="#{rate.prepaidValue}"></label>
                                        <input type="number" class="form-control" th:field="*{prepaidValue}" th:value="*{prepaidValue}" id="prepaidValue">
                                    </div>
                                </div>
                            </div>
                            <div id="standard" class="row" style="display: none;">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cashPaymentValue" class="control-label" th:text="#{rate.cashPaymentValue}"></label>
                                        <input type="number" class="form-control" th:field="*{cashPaymentValue}" th:value="*{cashPaymentValue}" id="cashPaymentValue" placeholder="15">
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="onlinePaymentValue" class="control-label" th:text="#{rate.onlinePaymentValue}"></label>
                                        <input type="number" class="form-control" th:field="*{onlinePaymentValue}" th:value="*{onlinePaymentValue}" id="onlinePaymentValue" placeholder="15">
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label" th:text="#{rate.currency}"></label>
                                    <select id="currencyType" th:field="*{currencyType}" th:value="*{currencyType}"
                                            class="form-control">
                                        <option value=""></option>
                                        <option th:each="item : ${currencyTypes}" th:value="${item}"
                                                th:text="${item}"></option>
                                    </select>
                                </div>
                            </div>

                            <div id="progressive" class="row" style="display: none;">
                                <input id="progressiveJson" type="hidden" th:field="*{progressiveJson}" th:value="*{progressiveJson}">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label" th:text="#{rate.progressiveTable}"></label>
                                        <table class="table table-bordered">
                                            <thead>
                                            <tr>
                                                <th th:text="#{rate.time}"></th>
                                                <th th:text="#{rate.sumOnline}"></th>
                                                <th th:text="#{rate.sumParkomat}"></th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody id="progressiveContainer">
                                            </tbody>
                                            <tbody id="progressiveInputs">
                                            <tr>
                                                <td id="progressiveIndex" th:text="#{rate.firstHour}"></td>
                                                <td>
                                                    <input id="progressiveOnlineCurrentHour" class="form-control" type="number" min="0" step="1" max="1000000">
                                                </td>
                                                <td>
                                                    <input id="progressiveParkomatCurrentHour" class="form-control" type="number" min="0" step="1" max="1000000">
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-secondary waves-effect" th:text="#{crm.add}" onclick="saveProgressive()"></button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td th:text="#{rate.followingHour}"></td>
                                                <td>
                                                    <input id="progressiveOnlineNextHours" class="form-control" type="number" min="0" step="1" max="1000000">
                                                </td>
                                                <td>
                                                    <input id="progressiveParkomatNextHours" class="form-control" type="number" min="0" step="1" max="1000000">
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-secondary waves-effect" th:text="#{crm.add}" onclick="addNextProgressive()"></button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div id="interval" class="row" style="display: none;">
                                <input id="intervalJson" type="hidden" th:field="*{intervalJson}" th:value="*{intervalJson}">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label" th:text="#{rate.progressiveTable}"></label>
                                        <table class="table table-bordered">
                                            <thead>
                                            <tr>
                                                <th th:text="#{rate.intervalFrom}"></th>
                                                <th th:text="#{rate.intervalUntil}"></th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody id="intervalContainer">
                                            </tbody>
                                            <tbody id="intervalInputs">
                                                <tr>
                                                    <td>
                                                        <select id="intervalFrom">
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <select id="intervalTo">
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <button type="button" class="btn btn-secondary waves-effect" th:text="#{crm.add}" onclick="saveInterval()"></button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!------------------------------------------------->
                            <div id="dimensions" class="row" style="display: none;">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cashPaymentValuePassenger" class="control-label" th:text="#{rate.cashPassengerCar}"></label>
                                        <input type="number" class="form-control" th:field="*{cashPaymentValuePassenger}" th:value="*{cashPaymentValuePassenger}" id="cashPaymentValuePassenger" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="onlinePaymentValuePassenger" class="control-label" th:text="#{rate.onlinePassengerCar}"></label>
                                        <input type="number" class="form-control" th:field="*{onlinePaymentValuePassenger}" th:value="*{onlinePaymentValuePassenger}" id="onlinePaymentValuePassenger" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cashPaymentValueVan" class="control-label" th:text="#{rate.cashVanCar}"></label>
                                        <input type="number" class="form-control" th:field="*{cashPaymentValueVan}" th:value="*{cashPaymentValueVan}" id="cashPaymentValueVan" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="onlinePaymentValueVan" class="control-label" th:text="#{rate.onlineVanCar}"></label>
                                        <input type="number" class="form-control" th:field="*{onlinePaymentValueVan}" th:value="*{onlinePaymentValueVan}" id="onlinePaymentValueVan" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cashPaymentValueTruck" class="control-label" th:text="#{rate.cashTruckCar}"></label>
                                        <input type="number" class="form-control" th:field="*{cashPaymentValueTruck}" th:value="*{cashPaymentValueTruck}" id="cashPaymentValueTruck" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="onlinePaymentValueTruck" class="control-label" th:text="#{rate.onlineTruckCar}"></label>
                                        <input type="number" class="form-control" th:field="*{onlinePaymentValueTruck}" th:value="*{onlinePaymentValueTruck}" id="onlinePaymentValueTruck" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-12"><b th:text="#{rate.nightRate}"></b></div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cashPaymentValuePassenger" class="control-label" th:text="#{rate.cashPassengerCarNight}"></label>
                                        <input type="number" class="form-control" th:field="*{cashPaymentValuePassengerNight}" th:value="*{cashPaymentValuePassengerNight}" id="cashPaymentValuePassenger" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="onlinePaymentValuePassengerNight" class="control-label" th:text="#{rate.onlinePassengerCarNight}"></label>
                                        <input type="number" class="form-control" th:field="*{onlinePaymentValuePassengerNight}" th:value="*{onlinePaymentValuePassengerNight}" id="onlinePaymentValuePassengerNight" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cashPaymentValueVanNight" class="control-label" th:text="#{rate.cashVanCarNight}"></label>
                                        <input type="number" class="form-control" th:field="*{cashPaymentValueVanNight}" th:value="*{cashPaymentValueVanNight}" id="cashPaymentValueVanNight" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="onlinePaymentValueVanNight" class="control-label" th:text="#{rate.onlineVarCarNight}"></label>
                                        <input type="number" class="form-control" th:field="*{onlinePaymentValueVanNight}" th:value="*{onlinePaymentValueVanNight}" id="onlinePaymentValueVanNight" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cashPaymentValueTruckNight" class="control-label" th:text="#{rate.cashTruckCarNight}"></label>
                                        <input type="number" class="form-control" th:field="*{cashPaymentValueTruckNight}" th:value="*{cashPaymentValueTruckNight}" id="cashPaymentValueTruckNight" placeholder="100">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="onlinePaymentValueTruckNight" class="control-label" th:text="#{rate.onlineTruckCarNight}"></label>
                                        <input type="number" class="form-control" th:field="*{onlinePaymentValueTruckNight}" th:value="*{onlinePaymentValueTruckNight}" id="onlinePaymentValueTruckNight" placeholder="100">
                                    </div>
                                </div>


                            </div>



                            <!------------------------------------------------->

                            <div class="form-group row">
                                <div class="col-12" sec:authorize="hasAnyRole('ROLE_OWNER', 'ROLE_ADMIN')">
                                    <button type="submit" class="btn btn-info waves-effect waves-light" th:text="#{crm.saveChanges}"></button>
                                    <button type="button" class="btn btn-secondary waves-effect" th:text="#{crm.close}"></button>
                                                                   </div>
                                </div>
                        </form>
                    </div>
                </div>
                <div class="card" th:if="${parkingRate.rateType != null && parkingRate.beforeFreeMinutes != null && ((parkingRate.cashPaymentValue != null && parkingRate.onlinePaymentValue != null) || parkingRate.progressiveJson != null)}">
                    <div class="card-header"><b th:text="#{rate.checkRate}"></b></div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="inDate" class="control-label" th:text="#{carState.inTimestamp}"></label>
                                    <input type="datetime-local" min="2018-01-01T00:00" max="2028-01-01T00:00" class="form-control" id="inDate">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="outDate" class="control-label" th:text="#{carState.outTimestamp}"></label>
                                    <input type="datetime-local" min="2018-01-01T00:00" max="2028-01-01T00:00" class="form-control" id="outDate">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="cashlessPayment" class="control-label" th:text="#{rate.casslessPayment}"></label>
                                    <input type="checkbox" class="form-control" id="cashlessPayment">
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-12">
                                <div class="form-group">
                                    <button type="button" class="btn btn-info waves-effect waves-light" th:text="#{crm.check}" onclick="getRateValue()"></button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-12">
                                <div class="form-group">
                                    <span id="checkResult"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function checkSelectedTypes(val){
        if(val === 'STANDARD'){
            $('#standard').show();
        } else {
            $('#standard').hide();
        }
        if(val === 'PROGRESSIVE'){
            $('#progressive').show();
            drawProgressive();
        } else {
            $('#progressive').hide();
        }
        if(val === 'INTERVAL'){
            $('#interval').show();
            drawInterval();
        } else {
            $('#interval').hide();
        }
        if(val === 'DIMENSIONS'){
            $('#dimensions').show();
            drawInterval();
        } else {
            $('#dimensions').hide();
        }
        console.log(val);
        if(val === 'PREPAID'){
            $('#prepaid').show();
            $('#freeMinutes').hide();
            $('#dayPayment').hide();
        } else {
            $('#prepaid').hide();
            $('#freeMinutes').show();
            $('#dayPayment').show();
        }
        if(val === 'FREE') {
            $('#prepaid').hide();
            $('#freeMinutes').hide();
            $('#dayPayment').hide();
        }
    }

    let progressiveArray = [];
    let intervalArray = [];

    function saveProgressive(){
        const progressiveOnlineCurrentHour = $('#progressiveOnlineCurrentHour').val();
        const progressiveParkomatCurrentHour = $('#progressiveParkomatCurrentHour').val();
        if(progressiveOnlineCurrentHour && progressiveOnlineCurrentHour >= 0 && progressiveParkomatCurrentHour && progressiveParkomatCurrentHour >= 0){
            progressiveArray.push({hour: progressiveArray.length + 1, onlineValue: progressiveOnlineCurrentHour, parkomatValue: progressiveParkomatCurrentHour});
            drawProgressive();
            $('#progressiveOnlineCurrentHour').val(undefined);
            $('#progressiveParkomatCurrentHour').val(undefined);
        }
    }

    function deleteProgressive(index){
        if(progressiveArray[index].allNext){
            $('#progressiveInputs').show();
        }
        progressiveArray.splice(index, 1);
        drawProgressive();
    }

    function addNextProgressive(){
        const progressiveOnlineNextHours = $('#progressiveOnlineNextHours').val();
        const progressiveParkomatNextHours = $('#progressiveParkomatNextHours').val();
        if(progressiveOnlineNextHours && progressiveOnlineNextHours >= 0 && progressiveParkomatNextHours && progressiveParkomatNextHours >= 0) {
            progressiveArray.push({hour: progressiveArray.length + 1, onlineValue: progressiveOnlineNextHours, parkomatValue: progressiveParkomatNextHours, allNext: true});
            $('#progressiveOnlineNextHours').val(undefined);
            $('#progressiveParkomatNextHours').val(undefined);
            drawProgressive();
        }
    }

    function drawProgressive(){
        let html = '';
        for(let i = 0; i < progressiveArray.length; i++){
            html = html + '<tr>';
            if(progressiveArray[i].allNext){
                html = html + '<td>[[#{rate.followingHour}]]</td><td>' + progressiveArray[i].onlineValue + '</td><td>' + progressiveArray[i].parkomatValue + '</td>';
                $('#progressiveInputs').hide();
            } else {
                html = html + '<td>[[#{rate.for}]]' + progressiveArray[i].hour + '[[#{rate.sequelHour}]]</td><td>' + progressiveArray[i].onlineValue + '</td><td>' + progressiveArray[i].parkomatValue + '</td>';
            }
            if (i + 1 === progressiveArray.length){
                html = html + '<td><button type="button" class="btn btn-secondary waves-effect" onclick="deleteProgressive(' + i+ ')">[[#{crm.delete}]]</button></td></tr>';
            } else {
                html = html + '<td></td></tr>';
            }
        }
        $('#progressiveContainer').html(html);
        $('#progressiveJson').val(JSON.stringify(progressiveArray));
        $('#progressiveIndex').text('[[#{rate.for}]]' + (progressiveArray.length + 1) + '[[#{rate.sequelHour}]]');
    }

    function optionsMap(id){
        if(id === 'allNext'){
            return 'Каждый последующий час'
        } else if(id === 'entrance'){
            return 'За заезд'
        } else if(id.length > 4 && !isNaN(id.replace('hour', ''))){
            return 'За ' + id.replace('hour', '') + ' час';
        }
    }

    function drawInterval(){
        let html = '';
        for(let i = 0; i < intervalArray.length; i++){
            html = html + '<tr>';
            html = html + '<td>' + intervalArray[i].intervalFrom + '.00</td><td>' + intervalArray[i].intervalTo + '.00</td>';
            html = html + '<td><button type="button" class="btn btn-secondary waves-effect" onclick="deleteInterval(' + i+ ')">[[#{crm.delete}]]</button></td></tr>';
            html = html + '<tr><td colspan="3">' +
                '<table class="table table-bordered">' +
                '<thead><tr><th>[[#{rate.accrualType}]]</th><th>[[#{rate.sumOnline}]] </th><th>[[#{rate.sumParkomat}]]</th><th> </th></tr></thead>'

            let addConditionFields1 = '<tbody><tr><td><select id="intervalType' + i + '">'
            let addConditionFields2 = '</select></td><td><input id="intervalOnlineHours' + i + '" class="form-control" type="number" min="0" step="1" max="1000000"></input></td><td><input id="intervalParkomatHours' + i + '" class="form-control" type="number" min="0" step="1" max="1000000"></input></td><td><button type="button" class="btn btn-secondary waves-effect" onclick="addProgressive(' + i+ ')">[[#{crm.add}]]</button></td></tr></tbody>'

            let options =
                '<option value="' + (intervalArray[i].condition? intervalArray[i].condition.length + 1 : 1) + 'hour">' + (intervalArray[i].condition? intervalArray[i].condition.length + 1 : 1) + '[[#{rate.sequelHour}]]</option>' +
                '<option value="allNext">[[#{rate.followingHour}]]</option>'

            if(intervalArray[i].condition && intervalArray[i].condition.length > 0){
                let addCondition = true;
                let conditionHtml = '<tbody>'
                for(let j = 0; j < intervalArray[i].condition.length; j++){
                    if(intervalArray[i].condition[j].intervalType === 'entrance' || intervalArray[i].condition[j].intervalType === 'allNext'){
                        addCondition = false;
                    }
                    conditionHtml = conditionHtml + '<tr><td>' + optionsMap(intervalArray[i].condition[j].intervalType)  + '</td><td>' + intervalArray[i].condition[j].intervalOnlineHours  + '</td><td>' + intervalArray[i].condition[j].intervalParkomatHours  + '</td><td>'
                    if(j + 1 === intervalArray[i].condition.length){
                        conditionHtml = conditionHtml + '<button type="button" class="btn btn-secondary waves-effect" onclick="deleteIntervalCondition(' + i+ ',' + j + ')">[[#{crm.delete}]]</button>'
                    }
                    conditionHtml = conditionHtml + '</td></tr>'
                }
                html = html + conditionHtml + '</tbody>';
                if(addCondition){
                    html = html + addConditionFields1 + options + addConditionFields2;
                }
            } else {
                options = options + '<option value="entrance">[[#{rate.entering}]]</option>';
                html = html + addConditionFields1 + options + addConditionFields2;
            }

            html = html + '</table></td></tr>'
        }
        $('#intervalContainer').html(html);
        $('#intervalJson').val(JSON.stringify(intervalArray));
    }

    function saveInterval(){
        let intervalFrom = $('#intervalFrom').val();
        let intervalTo = $('#intervalTo').val();

        if(intervalFrom && intervalTo){
            intervalArray.push({
                intervalFrom: intervalFrom,
                intervalTo: intervalTo
            });
            drawInterval();
            $('#intervalFrom').val(0);
            $('#intervalTo').val(0);
        }
    }

    function deleteInterval(index){
        intervalArray.splice(index, 1);
        drawInterval();
    }

    function deleteIntervalCondition(index, jndex){
        intervalArray[index].condition.splice(jndex, 1);
        drawInterval();
    }

    function addProgressive(index){
        let intervalType = $('#intervalType' + index).val();
        let intervalOnlineHours = $('#intervalOnlineHours' + index).val();
        let intervalParkomatHours = $('#intervalParkomatHours' + index).val();

        if(intervalType && intervalOnlineHours && intervalParkomatHours){
            if(!intervalArray[index].condition){
                intervalArray[index].condition = [];
            }
            intervalArray[index].condition.push({
                intervalType: intervalType,
                intervalOnlineHours: intervalOnlineHours,
                intervalParkomatHours: intervalParkomatHours
            });
            drawInterval();
        }
    }

    function getRateValue(){
        let inDate = $('#inDate').val();
        let outDate = $('#outDate').val();
        let cashlessPayment = $('#cashlessPayment').is(":checked");
        if(inDate && outDate){
            let body = {
                'inDate': inDate,
                'outDate': outDate,
                'cashlessPayment': cashlessPayment,
                'parkingId': $('#parkingId').val()
            }

            console.log(body)

            $.ajax({
                url:"/rest/rate/get/value",
                type:"POST",
                data: JSON.stringify(body),
                contentType:"application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                    $('#checkResult').text(data + " тг");
                }
            });
        }
    }

    $(document).ready(function() {
        let type = $('#types').val();
        if($('#progressiveJson').val()){
            progressiveArray = JSON.parse($('#progressiveJson').val());
        }
        if($('#intervalJson').val()){
            intervalArray = JSON.parse($('#intervalJson').val());
        }
        checkSelectedTypes(type);

        let options = '';
        for(let i=0; i<24; i++){
            options = options + '<option value="' + i + '">' + i + '.00' + '</option>'
        }
        $('#intervalFrom').html(options);
        $('#intervalTo').html(options);
    });
</script>